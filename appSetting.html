<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="index.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>
  <title>Telkom Domain</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <script src="/pkg/bundle.js" defer></script>
</head>

  <body>


    <div>

      <div class="container border rounded p-4 d-flex flex-column mb-5" style="font-size: 14px;">
        <div class="row border-bottom">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"Basic Information"}
          </div>
          <div class="col-lg-6">
            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Name*"}
              </p>
              <div class="input-group mb-2">
                <input type="text" class="form-control bg-input-grey"
                  aria-label="Dollar amount (with dot and two decimal places)" value={name}
                  oninput=self.link.callback(|data: InputData| Msg::InputText(data.value, Data::Name)) />
              </div>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Domain"}
              </p>
              <div class="input-group mb-2">
                <input type="text" class="form-control bg-input-grey"
                  aria-label="Dollar amount (with dot and two decimal places)" value={domain}
                  oninput=self.link.callback(|data: InputData| Msg::InputText(data.value, Data::Identifier)) />
              </div>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Client ID"}
              </p>
              <div class="input-group mb-2">
                <input type="text" class="form-control bg-input-grey"
                  aria-label="Dollar amount (with dot and two decimal places)" value={client_id}
                  oninput=self.link.callback(|data: InputData| Msg::InputText(data.value, Data::Identifier)) />
              </div>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Client Secret"}
              </p>
              <div class="input-group mb-2">
                <input type="text" class="form-control bg-input-grey"
                  aria-label="Dollar amount (with dot and two decimal places)" value={client_secret}
                  oninput=self.link.callback(|data: InputData| Msg::InputText(data.value, Data::Identifier)) />
              </div>
              <p>
                {"The Client Secret is not base64 encoded.""}
              </p>
            </div>

            <div class="mb-5">
              <p class="mb-2 fw-bold">
                {"Description"}
              </p>
              <div class="input-group mb-2">
                <textarea class="form-control" rows="4" placeholder="Add a description in less than 140 character"></textarea>
              </div>
              <p class="text-color-disabled">
                {"A free text description of the application. Max character count is 140."}
              </p>
            </div>

          </div>
        </div>



        <div class="row border-bottom mt-5">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"Application Properties"}
          </div>
          <div class="col-lg-6">
            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Application Logo"}
              </p>
              <div class="input-group mb-2">
                <input type="text" class="form-control bg-input-grey"
                  aria-label="Dollar amount (with dot and two decimal places)" value={https://path.to/my_logo.png}
                  oninput=self.link.callback(|data: InputData| Msg::InputText(data.value, Data::Identifier)) />
              </div>
              <p>
                {"The URL of the logo to display for the application, if none is set the default badge for this type of
                application will be shown. Recommended size is 150x150 pixels."}
              </p>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {Application Type"}
              </p>
              <div class="input-group mb-3">
                <select class="form-select" id="application_type">
                  <option selected=true>{"Custom App"}</option>
                  <option value="1">{"Single Web Application"}</option>
                  <option value="2">{"Machine to Machine"}</option>
                  <option value="3">{"Native"}</option>
                </select>
              </div>
              <p>
                {"The type of application will determine which settings you can configure from the dashboard."}
              </p>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Token Endpoint Authentication Method"}
              </p>
              <div class="input-group mb-3">
                <select class="form-select" id="application_type" disabled>
                  None
                  <option selected=true disabled>{"None"}</option>
                </select>
              </div>
              <p>
                {"Defines the requested authentication method for the token endpoint. Possible values are 'None' (public
                application without a client secret), 'Post' (application uses HTTP POST parameters) or 'Basic'
                (application uses HTTP Basic)."}
              </p>
            </div>

          </div>
        </div>

        <div class="row border-bottom mt-5">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"Application URIs"}
          </div>
          <div class="col-lg-6">
            
            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Application Login URI"}
              </p>
              <div class="input-group mb-2">
                <input type="text" class="form-control bg-input-grey"
                  aria-label="Dollar amount (with dot and two decimal places)" value={https://myapp.org/login}
                  oninput=self.link.callback(|data: InputData| Msg::InputText(data.value, Data::Identifier)) />
              </div>
              <p>
                {"In some scenarios, Auth0 will need to redirect to your application’s login page. This URI needs to
                point to a route in your application that should redirect to your tenant’s /authorize endpoint"}
              </p>
            </div>


            <div class="mb-5">
              <p class="mb-2 fw-bold">
                {"Allowed Callback URLs"}
              </p>
              <div class="input-group mb-2">
                <textarea class="form-control" rows="4"></textarea>
              </div>
              <p class="text-color-disabled">
                {"After the user authenticates we will only call back to any of these URLs. You can specify multiple
                valid URLs by comma-separating them (typically to handle different environments like QA or testing).
                Make sure to specify the protocol (https://) otherwise the callback may fail in some cases. With the
                exception of custom URI schemes for native clients, all callbacks should use protocol https://. You can
                use Organization URL parameters in these URLs."}
              </p>
            </div>

            <div class="mb-5">
              <p class="mb-2 fw-bold">
                {"Allowed Logout URLs"}
              </p>
              <div class="input-group mb-2">
                <textarea class="form-control" rows="4"
                  placeholder="Add a description in less than 140 character"></textarea>
              </div>
              <p class="text-color-disabled">
                {"A set of URLs that are valid to redirect to after logout from Auth0. After a user logs out from Auth0
                you can redirect them with the returnTo query parameter. The URL that you use in returnTo must be listed
                here. You can specify multiple valid URLs by comma-separating them. You can use the star symbol as a
                wildcard for subdomains (*.google.com). Query strings and hash information are not taken into account
                when validating these URLs."}
              </p>
            </div>

            <div class="mb-5">
              <p class="mb-2 fw-bold">
                {"Allowed Web Origins"}
              </p>
              <div class="input-group mb-2">
                <textarea class="form-control" rows="4"
                  placeholder="Add a description in less than 140 character"></textarea>
              </div>
              <p class="text-color-disabled">
                {"Comma-separated list of allowed origins for use with Cross-Origin Authentication, Device Flow, and web
                message response mode, in the form of <scheme> "://" <host> [ ":" <port> ], such as
                https://login.mydomain.com or http://localhost:3000. You can use wildcards at the subdomain level
                (e.g.: https://*.contoso.com). Query strings and hash information are not taken into account when
                validating these URLs."}
              </p>
            </div>

            <div class="mb-5">
              <p class="mb-2 fw-bold">
                {"Allowed Origins (CORS)"}
              </p>
              <div class="input-group mb-2">
                <textarea class="form-control" rows="4"
                  placeholder="Add a description in less than 140 character"></textarea>
              </div>
              <p class="text-color-disabled">
                {"Allowed Origins are URLs that will be allowed to make requests from JavaScript to Auth0 API (typically
                used with CORS). By default, all your callback URLs will be allowed. This field allows you to enter
                other origins if you need to. You can specify multiple valid URLs by comma-separating them or one by
                line, and also use wildcards at the subdomain level (e.g.: https://*.contoso.com). Query strings and
                hash information are not taken into account when validating these URLs.. You can use Organization URL
                placeholders in these URLs."}
              </p>
            </div>

          </div>
        </div>

        <div class="row border-bottom mt-5">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"ID TOKEN"}
          </div>
          <div class="col-lg-6">
            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"ID Token Expiration "}
              </p>
              <input type="number" class="form-control" min="1" value="36000" width="50px" />
              <p class="text-color-disabled">
                {"This setting allows you to set the lifetime of the id_token (in seconds)"}
              </p>
            </div>
          </div>
        </div>

        <div class="row border-bottom mt-5">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"Refresh Token Rotation"}
          </div>
          <div class="col-lg-6">

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Rotation"}
              </p>
              <div class="form-check form-switch fs-3 mb-4">
                <input class="form-check-input" type="checkbox" checked={rbac} onclick=self.link.callback(|_|
                  Msg::InputText(String::from("none"), Data::Rbac)) />
              </div>
              <p class="text-color-disabled">
                {"When enabled, as a result of exchanging a refresh token, a new refresh token will be issued and the
                existing token will be invalidated. This allows for automatic detection of token reuse if the token is
                leaked. In addition, an absolute expiration lifetime must be set."}
              </p>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Reuse Interval"}
              </p>
              <input type="number" class="form-control" min="1" value="0" width="50px" />
              <p class="text-color-disabled">
                {"The allowable leeway time that the same refresh_token can be used to request an access_token without
                triggering automatic reuse detection."}
              </p>
            </div>
          </div>
        </div>

        <div class="row border-bottom mt-5">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"Refresh Token Expiration"}
          </div>
          <div class="col-lg-6">

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Rotation"}
              </p>
              <div class="form-check form-switch fs-3 mb-4">
                <input class="form-check-input" type="checkbox" checked={rbac} onclick=self.link.callback(|_|
                  Msg::InputText(String::from("none"), Data::Rbac)) />
              </div>
              <p class="text-color-disabled">
                {"When enabled, as a result of exchanging a refresh token, a new refresh token will be issued and the
                existing token will be invalidated. This allows for automatic detection of token reuse if the token is
                leaked. In addition, an absolute expiration lifetime must be set."}
              </p>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Reuse Interval"}
              </p>
              <input type="number" class="form-control" min="1" value="0" width="50px" />
              <p class="text-color-disabled">
                {"The allowable leeway time that the same refresh_token can be used to request an access_token without
                triggering automatic reuse detection."}
              </p>
            </div>
          </div>
        </div>

        <div class="row border-bottom mt-5">
          <div class="col-lg-6 text-color-primary fw-bold mb-4">
            {"Access Settings"}
          </div>
          <div class="col-lg-6">
            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Allow Skipping User Consent"}
              </p>
              <div class="form-check form-switch fs-3 mb-4">
                <input class="form-check-input" type="checkbox" checked={allow_skip_user} onclick=self.link.callback(|_|
                  Msg::InputText(String::from("none"), Data::AllowSkipUser)) />
              </div>
              <p class="text-color-disabled">
                {"If this setting is enabled, this API will skip user consent for applications flagged as First Party."}
              </p>
            </div>

            <div class="mb-4">
              <p class="mb-2 fw-bold">
                {"Allow Offline Access"}
              </p>
              <div class="form-check form-switch fs-3 mb-4">
                <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" checked={allow_off_acc}
                  onclick=self.link.callback(|_| Msg::InputText(String::from("none"), Data::AllowOffAcc)) />
              </div>
              <p>
                {"If this setting is enabled, Auth0 will allow applications to ask for Refresh Tokens for this API."}
              </p>
            </div>

            <div class="mb-5 mt-3">
              <button type="button" class=format!("btn {} btn-primary position-relative", if self.loading_update_api
                {"loading"} else {""} ) onclick=self.link.callback(|_| Msg::Save) disabled={ if self.loading_update_api
                {true} else {false} }>
                <div class="telkom-label">
                  {"Save"}
                </div>
                <div class="telkom-spinner telkom-center">
                  <div class="spinner-border spinner-border-sm" role="status" />
                </div>
              </button>

              {
              if self.error_update_api.is_some() {
              html! {
              <div class="alert alert-warning" role="alert">
                <i class="bi bi-exclamation-triangle me-2"></i>
                { self.error_update_api.clone().unwrap() }
              </div>
              }
              } else {
              html! {}
              }
              }

            </div>
          </div>
        </div>

      </div>

      <div style="font-size: 14px;">
        <p class="fw-bold">
          {"Danger Zone"}
        </p>

        <div class="alert alert-danger d-flex flex-row justify-content-between" role="alert">
          <div>
            <p class="fw-bold">
              {"Delete This API"}
            </p>
            {"Once confirmed, this operation can't be undone!"}
          </div>
          <div>
            // <button // type="button" // class="btn btn-danger" //>{"Delete"}</button>

            <button type="button" class=format!("btn {} btn-danger position-relative", if self.loading_delete_api
              {"loading"} else {""} ) onclick=self.link.callback(|_| Msg::Delete) disabled={ if self.loading_delete_api
              {true} else {false} }>
              <div class="telkom-label">
                {"Delete"}
              </div>
              <div class="telkom-spinner telkom-center">
                <div class="spinner-border spinner-border-sm" role="status" />
              </div>
            </button>
            {
            if self.error_delete_api.is_some() {
            html! {
            <div class="alert alert-warning" role="alert">
              <i class="bi bi-exclamation-triangle me-2"></i>
              { self.error_delete_api.clone().unwrap() }
            </div>
            }
            } else {
            html! {}
            }
            }
          </div>
        </div>
      </div>
    </div>


















  </body>

</html>